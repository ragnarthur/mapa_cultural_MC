{% extends 'core/base.html' %}
{% load static %}

{% block title %}Espaços – Mapas Culturais{% endblock %}

{% block content %}
  <h2>Lista de Espaços</h2>
  <p><a href="{% url 'space_create' %}">+ Adicionar Espaço</a></p>

  <div id="map" style="height: 400px; margin-bottom: 1em;"></div>

  <ul>
    {% for sp in spaces %}
      <li>{{ sp.name }} — ({{ sp.location.y }}, {{ sp.location.x }})</li>
    {% empty %}
      <li>Nenhum espaço cadastrado.</li>
    {% endfor %}
  </ul>
{% endblock %}

{% block scripts %}
  <script id="spaces-data" type="application/json">
  [
    {% for sp in spaces %}
      {
        "name": "{{ sp.name|escapejs }}",
        "lat": {{ sp.location.y }},
        "lng": {{ sp.location.x }}
      }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ]
  </script>
  <script src="{% static 'core/js/map.js' %}"></script>
{% endblock %}
